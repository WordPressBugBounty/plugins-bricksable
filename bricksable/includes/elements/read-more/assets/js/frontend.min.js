class BricksableReadMore{static defaults={collapsedHeight:"50px",moreLink:"Read More",lessText:"Read Less",speed:400,startOpen:!1,heightMargin:16,scrollBacktoTop:!1,scrollBacktoTopTarget:"element",scrollBacktoTopCssId:"",readMoreIcon:"",lessIcon:"",readMoreIconSVG:"",lessIconSVG:""};constructor(e,t={}){if(this.element=e,!this.element||this.element.dataset.baReadMoreInitialized)return;if(null===this.element.offsetParent){let i=new IntersectionObserver((e,i)=>{e.forEach(e=>{e.isIntersecting&&(this._initialize(t),i.unobserve(this.element))})},{threshold:.001});i.observe(this.element)}else this._initialize(t)}_initialize(e){if(!this.element.dataset.baReadMoreInitialized){if(this.config={...BricksableReadMore.defaults,...e},this.currentCollapsedHeight=this.config.collapsedHeight,this.wrapper=this.element.querySelector(".ba-read-more-wrapper"),this.content=this.wrapper?this.wrapper.querySelector(".ba-readmore-content"):null,this.readMoreBtn=this.element.querySelector(".ba-read-more-button"),!this.content||!this.readMoreBtn){console.error("Bricksable Read More: Missing required elements (content or button).");return}this.element.dataset.baReadMoreInitialized="true",this.isExpanded=this.config.startOpen,this.init()}}init(){this.setInitialState(),this.bindEvents(),this.handleResize()}setInitialState(){this.content.style.overflow="hidden",this.content.style.height=this.isExpanded?`${this.content.scrollHeight}px`:this.currentCollapsedHeight,this.isExpanded&&this.wrapper.classList.add("expanded"),this.updateButtonState(),setTimeout(()=>{this.content.style.transition=`height ${this.config.speed}ms ease-in-out`},10)}bindEvents(){this.readMoreBtn.addEventListener("click",e=>{e.preventDefault(),this.toggle()}),window.addEventListener("resize",this.handleResize.bind(this))}toggle(){this.isExpanded=!this.isExpanded,this.isExpanded?(this.content.style.height=`${this.content.scrollHeight}px`,this.wrapper.classList.add("expanded")):(this.content.style.height=this.currentCollapsedHeight,this.wrapper.classList.remove("expanded"),this.config.scrollBacktoTop&&this.handleScroll()),this.updateButtonState()}getResponsiveCollapsedHeight(){let e=document.documentElement.clientWidth,{collapsedHeight:t,collapsedHeightTabletPortrait:i,collapsedHeightMobileLandscape:s,collapsedHeightMobilePortrait:n,tablet_portrait:o,mobile_landscape:r,mobile_portrait:a}=this.config,l=[{width:a,height:n},{width:r,height:s},{width:o,height:i},].sort((e,t)=>e.width-t.width),h=t;for(let d of l)if(e<=d.width&&d.height){h=d.height;break}return"number"!=typeof h&&("string"!=typeof h||h.endsWith("px"))?h:`${h}px`}handleResize(){this.currentCollapsedHeight=this.getResponsiveCollapsedHeight();let e=parseFloat(this.currentCollapsedHeight),t=parseFloat(this.config.heightMargin),i=this.content.scrollHeight>e+t;this.readMoreBtn.style.display=i?"":"none",this.isExpanded?this.content.style.height=`${this.content.scrollHeight}px`:this.content.style.height=i?this.currentCollapsedHeight:"auto"}handleScroll(){setTimeout(()=>{if("css-id"===this.config.scrollBacktoTopTarget&&this.config.scrollBacktoTopCssId){let e=document.getElementById(this.config.scrollBacktoTopCssId);e?e.scrollIntoView({behavior:"smooth"}):console.warn(`Bricksable Read More: Scroll target CSS ID "${this.config.scrollBacktoTopCssId}" not found.`)}else this.wrapper.scrollIntoView({behavior:"smooth"})},this.config.speed)}updateButtonState(){let e=this.readMoreBtn.querySelector("span:not(.ba-read-more-icon)"),t=this.readMoreBtn.querySelector(".ba-read-more-icon"),i=this.isExpanded?this.config.lessText:this.config.moreLink,s="";s=this.isExpanded?this.config.lessIconSVG||(this.config.lessIcon?`<i class="${this.config.lessIcon}"></i>`:""):this.config.readMoreIconSVG||(this.config.readMoreIcon?`<i class="${this.config.readMoreIcon}"></i>`:""),e&&(e.textContent=i),t&&(t.innerHTML=s)}}var bricksableReadMore=new BricksFunction({parentNode:document,selector:".brxe-ba-read-more[data-ba-bricks-read-more-options]",forceReinit:!0,subscribeEvents:["bricks/tabs/changed","bricks/accordion/open","bricks/ajax/popup/loaded","bricks/popup/open","bricks/ajax/pagination/completed","bricks/ajax/load_page/completed","bricks/ajax/query_result/displayed",],eachElement:function(e){try{let t=e.dataset.baBricksReadMoreOptions?JSON.parse(e.dataset.baBricksReadMoreOptions):{};new BricksableReadMore(e,t)}catch(i){console.error("Error initializing Bricksable Read More:",i)}}});function bricksableInitReadMoreInstances(){bricksableReadMore.run()}document.addEventListener("DOMContentLoaded",()=>{"undefined"!=typeof bricksIsFrontend&&bricksIsFrontend&&bricksableInitReadMoreInstances()});