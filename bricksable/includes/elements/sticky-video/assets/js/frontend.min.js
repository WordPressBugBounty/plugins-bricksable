var bricksableVideoFn=new BricksFunction({parentNode:document,selector:".brxe-ba-sticky-video",eachElement:function(e){if(bricksIsFrontend){let t=()=>{let t=e.querySelector(".bricks-video-overlay"),i=e.querySelector(".bricks-video-overlay-icon");t&&t.remove(),i&&i.remove()};e.addEventListener("click",t),e.addEventListener("keydown",i=>{("Enter"===i.key||" "===i.key)&&t(),e.querySelector("video")||"Enter"!==i.key&&" "!==i.key||i.preventDefault()})}let i=e.querySelector("video")?e.querySelector("video"):e.querySelector("iframe");if(i){if(window.hasOwnProperty("Plyr")){let a=e.dataset.scriptId,r=e.querySelector(".bricks-plyr"),n=window.bricksableStickyVideoData?.StickyVideoInstances?.[a]||void 0;n&&n.destroy(),r&&(n=new Plyr(r)),window.bricksableStickyVideoData.StickyVideoInstances[a]=n}i.hasAttribute("autoplay")&&i.setAttribute("playsinline",!0)}}}),bricksableVideoOverlayClickDetectorFn=new BricksFunction({parentNode:document,selector:".bricks-video-overlay, .bricks-video-overlay-icon, .bricks-video-preview-image",frontEndOnly:!0,subscribeEvents:["bricks/ajax/pagination/completed","bricks/ajax/load_page/completed"],eachElement:function(e){let t=e=>{let t=e.target.closest(".brxe-ba-sticky-video");if(!t)return;let i=t.querySelector(".bricks-video-preview-image");if(i){let a=document.createElement("iframe"),r=[...i.attributes];r.forEach(e=>{if("class"!==e.name&&"style"!==e.name){if("data-iframe-src"===e.name){a.setAttribute("src",e.value);return}a.setAttribute(e.name,e.value)}}),i.replaceWith(a)}let n=t.querySelector("iframe");n&&n.getAttribute("src")&&(n.parentNode.setAttribute("data-is-play",!0),n.getAttribute("src").includes("youtube")&&n.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*"),n.getAttribute("src").includes("vimeo")&&n.contentWindow.postMessage('{"method":"play"}',"*")),n&&n.removeAttribute("tabindex");let o=t.querySelector("video");o&&(o.play(),o.removeAttribute("tabindex"),setTimeout(()=>{o.focus()},0))};e.addEventListener("click",t),e.addEventListener("keydown",e=>{(" "===e.key||"Enter"===e.key)&&(e.preventDefault(),t(e))})}});const bricksablePauseMediaFn=new BricksFunction({parentNode:document,selector:'video, iframe[src*="youtube"], iframe[src*="vimeo"]',subscribeEvents:["bricks/popup/close"],forceReinit:!0,eachElement(e){if(("VIDEO"===e.tagName||"AUDIO"===e.tagName)&&e.pause&&"function"==typeof e.pause){e.pause();return}if("IFRAME"===e.tagName){let t=e.getAttribute("src"),i=t.includes("youtube"),a;if(t.includes("vimeo")||i){e.contentWindow.postMessage(JSON.stringify(i?{event:"command",func:"pauseVideo",args:""}:{method:"pause"}),"*");return}}},listenerHandler(e){if(e?.type&&"bricks/popup/close"===e.type){let t=e?.detail?.popupElement;t&&bricksablePauseMediaFn.run({parentNode:t})}}}),bricksableVideoInitFn=new BricksFunction({parentNode:document,selector:".brxe-ba-sticky-video",forceReinit:(e,t)=>!bricksIsFrontend,eachElement(e){try{i=JSON.parse(e.dataset.baBricksStickyVideoOptions)}catch(t){return!1}var i,a=e.querySelector(".ba-sticky-video-wrapper"),r="ba-sticky-video-"+e.dataset.scriptId,n=e.querySelector(`#${r}`);e.offsetTop+e.clientHeight/1,i.stickyOnPlay;var o=!1,s=!1,c=e.querySelector(".ba-sticky-video-close-icon");let l,d=n.dataset.src;if(!d)return;let u=!1,y=!1,p=!1,b;if(-1!==d.indexOf("youtube.com")||-1!==d.indexOf("youtu.be")){if(u=!0,y=!0,-1!==d.indexOf("watch?v=")){let m=d.lastIndexOf("=");l=d.slice(m+1)}else if(-1!==d.indexOf("embed/")){let v=d.lastIndexOf("/");l=d.slice(v+1)}else if(-1!==d.indexOf("youtu.be")){let f=d.lastIndexOf("/");l=d.slice(f+1)}d=d.replace("watch?v=","embed/")}-1!==d.indexOf("vimeo.com")&&(u=!0,p=!0,-1===d.indexOf("player.vimeo.com/video")&&(d=d.replace("vimeo.com","player.vimeo.com/video")));let k;if(u){if(y){if(!document.querySelector('script[src="https://www.youtube.com/iframe_api"]')){let S=document.createElement("script");S.src="https://www.youtube.com/iframe_api";let g=document.getElementsByTagName("script")[0];g.parentNode.insertBefore(S,g)}function E(t){var a=1===t.data,r=2===t.data;t.data,a&&(s=!0,t.target.g.parentNode.setAttribute("data-is-play",s),i.stickyClosePauseVideo&&(o=!1),setTimeout(()=>{bricksableOnScroll(e)},300)),r&&(s=!1,t.target.g.parentNode.setAttribute("data-is-play",s))}k=document.createElement("div"),bricksIsFrontend&&e.querySelector("video")&&e.removeChild(e.querySelector("video")),e.appendChild(k);let _=setInterval(function(){!n.classList.contains("bricks-lazy-hidden")&&window.YT&&YT.Player&&(clearInterval(_),b=new YT.Player(n,{videoId:l,events:{onReady:function(e){b.addEventListener("onStateChange",function(e){})},onStateChange:E}}))},100)}if(p){if(!document.querySelector('script[src="https://player.vimeo.com/api/player.js"]')){let h=document.createElement("script");h.src="https://player.vimeo.com/api/player.js";let w=document.getElementsByTagName("script")[0];w.parentNode.insertBefore(h,w)}bricksIsFrontend&&e.querySelector("video")&&e.removeChild(e.querySelector("video")),k=document.createElement("div"),e.appendChild(k);let $=d.split("/").pop(),O=setInterval(function(){if(window.Vimeo&&Vimeo.Player){if(n.classList.contains("bricks-lazy-hidden"))return;clearInterval(O);let t=new Vimeo.Player(n,{id:$,width:640});t.ready().then(function(){s=!1,t.on("play",function(){s=!0,n.parentNode.setAttribute("data-is-play",s),i.stickyClosePauseVideo&&(o=!1),setTimeout(()=>{bricksableOnScroll(e)},300)}),t.on("pause",function(){s=!1,n.parentNode.setAttribute("data-is-play",s)})})}},100)}}else(k=e.querySelector("video"))&&(k.addEventListener("play",function(){k.paused?(s=!1,n.parentNode.setAttribute("data-is-play",s)):(s=!0,n.parentNode.setAttribute("data-is-play",s),i.stickyClosePauseVideo&&(o=!1),bricksableOnScroll(e))}),c.addEventListener("click",function(e){o=!0,i.stickyClosePauseVideo&&k.playing&&document.querySelector(`#${r}`).contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),a.classList.remove("ba-video-is-sticky","brx-animate-"+i.animationIn)}),k.addEventListener("loadedmetadata",function(){}))}});function bricksableOnScroll(e,t){try{a=JSON.parse(e.dataset.baBricksStickyVideoOptions)}catch(i){return!1}var a,r=e.querySelector(".ba-sticky-video-wrapper"),n="ba-sticky-video-"+e.dataset.scriptId;e.querySelector(`#${n}`);var o,s=Math.floor(e.offsetTop+e.clientHeight/2),c=a.stickyOnPlay,l=!1,d=!1;e.querySelector(".ba-sticky-video-close-icon").addEventListener("click",function(e){l=!0,a.stickyClosePauseVideo&&bricksablePauseMediaFn.run({parentNode:r}),d=!1,r.setAttribute("data-is-play",d),r.classList.remove("ba-video-is-sticky","brx-animate-"+a.animationIn)}),window.addEventListener("scroll",function(e){var t=window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0);d=r.getAttribute("data-is-play"),t>s?c&&d?l||(r.classList.add("ba-video-is-sticky","brx-animated","brx-animate-"+a.animationIn),""!==a.animationDuration&&r.classList.add(a.animationDuration)):c||d&&!d||l||(r.classList.add("ba-video-is-sticky","brx-animated","brx-animate-"+a.animationIn),""!==a.animationDuration&&r.classList.add(a.animationDuration),""!==a.animationDuration&&r.classList.add(a.animationDuration)):r.classList.remove("ba-video-is-sticky","brx-animate-"+a.animationIn)})}function bricksableStickyVideo(){bricksableVideoFn.run(),bricksableVideoOverlayClickDetectorFn.run(),bricksableVideoInitFn.run()}document.addEventListener("DOMContentLoaded",function(e){bricksIsFrontend&&bricksableStickyVideo()});